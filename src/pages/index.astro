---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';

// Get latest 3 posts
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).slice(0, 3);
---

<!doctype html>
<html lang="zh-Hant">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
            /* Local Styles for Homepage */
            .hero-section {
                padding: 4rem 1rem;
                /* Clean background, no image */
                background: linear-gradient(180deg, var(--color-warm-bg) 0%, #fff 100%);
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 2rem;
            }
            @media (min-width: 768px) {
                .hero-section {
                    flex-direction: row;
                    text-align: left;
                    justify-content: center;
                    gap: 4rem;
                    padding: 6rem 1rem;
                }
                .hero-content {
                    text-align: left;
                    max-width: 500px;
                }
                .hero-image {
                    max-width: 400px;
                }
            }

            .hero-image img {
                width: 100%;
                border-radius: 20px;
                box-shadow: var(--box-shadow);
                border: 4px solid white;
            }

            .hero-content h1 {
                font-size: 3rem;
                font-weight: 800;
                letter-spacing: -0.05em;
                margin-bottom: 1rem;
                color: var(--color-primary);
            }
            .hero-content .highlight {
                color: var(--color-red); /* Red Accent */
            }
            .hero-content p {
                font-size: 1.25rem;
                color: var(--color-secondary);
                margin-bottom: 2rem;
                line-height: 1.6;
            }
            .cta-button {
                display: inline-block;
                padding: 0.75rem 2rem;
                background-color: var(--color-red); /* Red Button */
                color: white;
                text-decoration: none;
                border-radius: 9999px;
                font-weight: 600;
                transition: transform 0.2s, background-color 0.2s;
                border: none;
                box-shadow: 0 4px 6px rgba(220, 38, 38, 0.25);
            }
            .cta-button:hover {
                transform: translateY(-2px);
                background-color: #b91c1c; /* Darker red */
            }

            .section-title {
                text-align: center;
                font-size: 2rem;
                margin-bottom: 3rem;
                position: relative;
            }
            .section-title::after {
                content: '';
                display: block;
                width: 60px;
                height: 4px;
                background: var(--color-red); /* Red Line */
                margin: 0.5rem auto 0;
            }

            .grid-section {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 2rem;
                padding: 2rem 0;
                max-width: 960px;
                margin: 0 auto;
            }
            .card {
                padding: 2rem;
                background: var(--color-paper);
                border-radius: 12px;
                box-shadow: var(--box-shadow);
                border: 1px solid var(--gray-light);
                transition: transform 0.2s;
                border-top: 4px solid var(--accent); /* Blue Top Border */
            }
            .card:hover {
                transform: translateY(-4px);
            }
            .card h3 {
                margin-top: 0;
                font-size: 1.5rem;
                color: var(--color-primary);
            }

            .latest-posts ul {
                list-style: none;
                padding: 0;
                display: grid;
                gap: 2rem;
            }
            
            /* Responsive Font Sizes */
            @media (max-width: 768px) {
                .hero-content h1 { font-size: 2.5rem; }
                .hero-section { text-align: center; } /* Revert to center on mobile */
                .hero-content { text-align: center; }
            }
		</style>
	</head>
	<body>
		<Header />
		<main>
            <!-- Hero Section -->
            <section class="hero-section">
                <!-- Text Left (Desktop) -->
                <div class="hero-content">
                    <h1>Vista Cheng <br/><span class="highlight">開外掛的人</span></h1>
                    <p>
                        資深技術作家、AI 應用教練。
                        <br />
                        協助你用科技與寫作，放大個人影響力。
                    </p>
                    <a href="/about" class="cta-button">認識 Vista</a>
                </div>
                <!-- Image Right (Desktop) -->
                <div class="hero-image">
                     <img src="/profile.jpg" alt="Vista Cheng Profile" width="600" height="auto" />
                </div>
            </section>

            <!-- Services / Features -->
            <section style="padding: 4rem 1rem; background: #fff;">
                <h2 class="section-title">專業服務</h2>
                <div class="grid-section">
                    <div class="card">
                        <h3>寫作教練</h3>
                        <p>從文字力到影響力，打造個人品牌的基石。</p>
                    </div>
                    <div class="card">
                        <h3>AI 應用導入</h3>
                        <p>為企業與個人量身打造 AI 工作流，提升 10 倍生產力。</p>
                    </div>
                    <div class="card">
                        <h3>企業內訓</h3>
                        <p>提供專業的培訓課程，協助組織數位轉型。</p>
                    </div>
                </div>
            </section>

            <!-- Latest Articles -->
            <section style="padding: 4rem 1rem;">
                <h2 class="section-title" style="margin-bottom: 2rem;">最新文章</h2>
                <div style="max-width: 800px; margin: 0 auto;">
                    <ul class="latest-posts">
                        {
                            posts.map((post) => (
                                <li style="margin-bottom: 1.5rem;">
                                    <a href={`/blog/${post.id}/`} style="text-decoration: none; display: block;">
                                        <div class="card" style="display: flex; flex-direction: column; gap: 0.5rem; padding: 1.5rem; border-top: none; border-left: 4px solid var(--color-secondary);">
                                            <h4 style="margin:0; font-size: 1.25rem; color: var(--color-primary);">{post.data.title}</h4>
                                            <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: var(--gray);">
                                                <FormattedDate date={post.data.pubDate} />
                                                <span style="color: var(--color-red);">閱讀更多 &rarr;</span>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                            ))
                        }
                    </ul>
                    <div style="text-align: center; margin-top: 2rem;">
                        <a href="/blog" class="cta-button" style="background: transparent; color: var(--color-primary); border: 2px solid var(--color-primary);">閱讀所有文章</a>
                    </div>
                </div>
            </section>

		</main>
		<Footer />
	</body>
</html>
